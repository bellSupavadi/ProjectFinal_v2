<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script type="text/javascript" src=".\script.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <title>ABOUNT</title>
    
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/6.1.0/firebase-app.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/6.1.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.1.0/firebase-firestore.js"></script>
    <script>
        // Your web app's Firebase configuration
     
    </script>
</head>

<body>

    <nav class="navbar navbar-expand-md navbar-light bg-light fixed-top">
        <a class="navbar-brand" href="home.html">
            <img src="photo/MFR.png" style="width:50px;">
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
            aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>


    </nav>
    <div class="container">
        <div class="card text-left">

            <div class="card-body">
                <h4 class="card-title">New Password</h4><br>
                <input type="password" class="form-control form-control-lg" id="newPass" name="newPass"
                    placeholder="New password" aria-describedby="helpId" required autofocus><br>
                <!-- <button type="submit" class="btn btn-success" onclick="resetPassword()" >ยืนยัน</button> -->
<a name="" id="" class="btn btn-primary" href="#" role="button" onclick="test()">ddd</a>
            </div>
        </div>
    </div>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <script>

        // firebase.auth().onAuthStateChanged(function (user) {
        //     if (user) {
        //         userid = user.uid;
        //         console.log(user.emailVerified);

        //         if (user.emailVerified == false) {
        //             // alert("Confirm Email")
        //             registerfirebase(user.uid)



        //         }
        //         else if (user.emailVerified == true) {
        //             localStorage.setItem("id", user.uid);
        //             localStorage.setItem("mail", user.email);
        //             window.location.href = 'shop.html'
        //         }
        //     }

        // });

        // async function resetPassword() {
        //     let params = (new URL(document.location)).searchParams;
        //     let email = params.get("email");
        //     let password = document.getElementById('newPass').value;
        //     //console.log(email)
        //     let validate = resetValidate(email, password)
        //     if (validate) {
        //         // console.log('hhhhh')
        //         alert('สร้างรหัสผ่านใหม่เรียบร้อย')
        //     } else {

        //     }
        // }

        // async function resetValidate(email, password) {


        //     let validate = false;
        //     let oldpassword = null;

        //     await db.collection("user").where("email", "==", email).get().then((querySnapshot) => {
        //         querySnapshot.forEach((doc) => {

        //             if (doc.data().email == email) {
        //                 oldpassword = doc.data().password;
        //                 db.collection("user").doc(doc.id).update({ password: `${password}` });

        //                 validate = true;

        //             }
        //             console.log("come to check")

        //         });

        //     });

        //     if (validate == true) {
        //         increaseToFriebaseAuth(email, oldpassword, password);
        //     }
        //     return validate
        // }

        // async function increaseToFriebaseAuth(email, oldpassword, password) {
        //     let user
        //     let loadFinish = false
        //     firebase.auth().signInWithEmailAndPassword(email, oldpassword).then(function (data) {

        //         user = firebase.auth().currentUser;
        //         loadFinish = true;
        //     }).catch(function (error) {
        //         // Handle Errors here.

        //         var errorCode = error.code;
        //         var errorMessage = error.message;
        //         if (errorCode != 'auth/wrong-password') {
        //             alert('รหัสผ่านไม่ถูกต้อง');
        //         } else {
        //             alert(errorMessage);

        //         }

        //     });

        //     if (loadFinish) {
        //         await user.updatePassword(password).then(function () {
        //             // Update successful.

        //             // alert("เปลี่ยนรหัสผ่านเรียบร้อย")
        //         }).catch(function (error) {
        //             // An error happened.
        //             console.log(error)
        //         });

        //     }
        // }

    </script>

</body>

</html>